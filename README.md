# Dacos_Datathon

해당 문서는 DACOS 데이터톤을 위해 개설한 Dacos_Datathon 리포지토리에 대한 문서입니다.

기본 진행 순서는 다음과 같습니다.
1. 각자 python, R 등을 사용하여 데이터 분석 진행
2. 얻은 인사이트를 기반으로 데이터톤 산출물 논의
3. 논의를 기반으로 산출물 실제 구현

---
ChatGPT의 가이드라인

# 0) 문제정의(데이터톤용 시나리오)

* 발주/재고 최적화: 점포×상품 주간 수요 예측 → 권장 발주량/묶음단위(EA/CS/BX) 제안
* 이익기여 & 리스크: 매출–매입(공급단가) 기반 기여도/마진(상대지표) + 반품율/품절지표
* 네트워크 인사이트: 공급사→센터→점포 vs 직배송(매입데이터에 매출처가 존재) 비중/특성 비교
* 지역/카테고리 성장성: 우편번호 기반의 권역별 수요·반품·성장 분석

# 1) 스키마 통합 & 로딩

엑셀 여러 파일을 하나의 표준 스키마로 합치고(센터/연도 구분 컬럼 추가), 사실 테이블을 두 개로 잡습니다.

* `fact_sales`(매출/반품): 판매일, 매출처코드(점포), 우편번호, 옵션코드(EA/CS/BX), 규격, 입수, 바코드, 상품명, 분류(대·중·소), 공급가격, 부가세, 판매수량(반품 포함)
* `fact_purchase`(매입/입고): 판매일(입고일), 매입처코드(공급사), 우편번호, 입고형태, 옵션코드, 규격, 입수, 바코드, 상품명, 분류, 공급가격/공급단가, 부가세, 입고수량

파생 차원 테이블:

* `dim_product`(바코드+상품명+규격 기준의 안정키)
* `dim_store`(매출처코드, 우편번호)
* `dim_date`(일/주/월, 시즌/프로모션 더미 등)

# 2) 정합성·전처리 규칙

* 금액 가상화: 공급가격은 일정 비율 조정된 값이므로 절대액 대신 **지수·비율** 분석(성장률, 마진율 등)에 초점.
* 2023년 표준모델 전환: 2023.01 이후를 구조적 단절점으로 분리/비교(전·후 추세 비교).
* 반품 처리: 판매수량의 부호(+/–) 혼재 가능 → **표준화(반품은 음수)** 후 순매출·반품율 계산.
* 테스트 데이터 제거: 우편번호 `00000` 필터링.
* 단위 통일: EA/CS/BX를 **EA 기준 수량**으로 환산(예: `ea_qty = 수량 × 입수`), 묶음단위 지표는 별도 보존.
* 카테고리·상품 식별 안정화: 상품명/바코드/규격/단가/분류가 수시 변경 가능 → 바코드 단독키 지양, `바코드+규격(+이름 유사도)`로 매칭 테이블 구축.
  분류는 대분류 중심으로 스냅샷 고정 또는 상위(대)분류로 roll-up.
* 직배송 식별: 매입데이터에 **매출처가 채워진 행**을 직배송으로 태깅(센터 재고 미경유).
* VAT 처리: 공급가격과 부가세의 관계 명시(부가세는 공급가격 기준). 필요 시 공·부가세 금액 별도 컬럼화.

# 3) 기초 KPI & EDA(빠른 성과)

* 수요 추이: 월/주별 판매 EA, 점포·카테고리 Top-N, 신규·단종 SKU(최초/최종 판매일)
* 반품 진단: 반품율(–EA/판매 EA), 사유 추정(카테고리·시즌·옵션코드 패턴)
* 매입↔매출 흐름: 누적 입고–판매로 재고흐름 근사, 직배송 비중·공급사별 특징
* 지역 분석: 우편번호→권역 맵핑(시/군/구)로 점포 밀집·성장 Heatmap
* 가격지표(상대): EA당 공급단가, (매출공급가–매입단가)/매출공급가 ≈ **마진율(상대)**

# 4) 심화 분석(데이터톤 주제화)

* 발주 추천(수요예측): 점포×상품 주간 EA 수요를 예측(Prophet/LightGBM/XGBoost).
  피처: 최근 n주 판매, 시즌/요일, 직전 입고, 반품, 직배송 여부, 센터 전환 이후 더미 등.
* ABC–XYZ 세그멘테이션: 기여(Volume/매출지수)×수요변동성으로 관리전략 분류.
* 묶음단위 최적화: EA/CS/BX 주문비율·평균 EA수량 분석 → 점포별 권장 발주단위 추천.
* 마진/리스크 맵: (상대)마진율 vs 반품율/변동성으로 위험상품 식별.
* 2023 전환 효과: 전환 전·후 성장률·반품율·직배송 비중 변화의 DID(준실험) 분석.

# 5) 산출물 구조(권장)

* 데이터 파이프라인: `01_ingest`(엑셀 병합) → `02_clean`(규칙 적용) → `03_features`(EA환산/태깅) → `04_eda` → `05_models`.
* 대시보드(예: Streamlit/Power BI):
  ① 개요(KPI) ② 점포/카테고리 Drill-down ③ 반품 & 직배송 ④ 발주추천(다운로드) ⑤ 전환효과.
* 문서화: 가정·제한(금액 가상화, 바코드 변동 등)과 컬럼 사전.

# 6) 체크리스트(실행용)

* [ ] 파일 병합(센터/연도 레이블)
* [ ] 테스트 우편번호 제거(00000)
* [ ] 반품 부호 표준화
* [ ] EA 환산 로직 검증(옵션코드·입수)
* [ ] 바코드·규격 기반 상품키 생성(변경 내성)
* [ ] 2023 전환 더미 생성
* [ ] 직배송 태깅(매입데이터 내 매출처 존재)
* [ ] 금액 지표는 지수/비율 위주(가상화 주의)

---

2025.08.29 수정
